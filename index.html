<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Road Quality AI | Infrastructure Analysis</title>
  
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800;900&display=swap" rel="stylesheet">
  
  <!-- Tailwind Config for Custom Colors -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: { sans: ['Inter', 'sans-serif'] },
          colors: {
            gold: '#ffd966',
            accent: '#ff7a18',
            dark: '#111214',
            card: '#141416',
            'card-hover': '#1c1e21'
          },
          animation: {
            'fade-in': 'fadeIn 0.5s ease-out',
            'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
          },
          keyframes: {
            fadeIn: {
              '0%': { opacity: '0', transform: 'translateY(10px)' },
              '100%': { opacity: '1', transform: 'translateY(0)' },
            }
          }
        }
      }
    }
  </script>
  <link rel="stylesheet" href="style.css">
<script type="importmap">
{
  "imports": {
    "react": "https://aistudiocdn.com/react@^19.2.0",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/",
    "react/": "https://aistudiocdn.com/react@^19.2.0/",
    "lucide-react": "https://aistudiocdn.com/lucide-react@^0.554.0"
  }
}
</script>
</head>
<body class="min-h-screen text-white selection:bg-accent/30 pb-20 relative overflow-x-hidden">

  <!-- Dynamic Background -->
  <div class="fixed inset-0 -z-20">
    <div class="absolute inset-0 bg-gradient-to-b from-dark/90 via-dark/80 to-black z-10"></div>
    <img 
      src="https://images.unsplash.com/photo-1542553458-79a63a573c3c?q=80&w=2070&auto=format&fit=crop" 
      alt="Road Infrastructure" 
      class="w-full h-full object-cover opacity-40"
    />
  </div>
  <div class="fixed top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-accent to-transparent opacity-50 z-50"></div>

  <!-- PERMANENT FLOATING POPUP -->
  <div class="fixed bottom-6 right-6 z-50 max-w-xs animate-fade-in">
    <div class="bg-card/90 backdrop-blur-md border border-accent/30 rounded-xl p-4 shadow-2xl shadow-black/50 flex gap-3 items-start hover:border-accent transition-colors">
      <div class="bg-accent/20 p-2 rounded-full text-accent mt-1 animate-pulse">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 12h-4l-3 9L9 3l-3 9H2"/></svg>
      </div>
      <div>
        <h4 class="text-sm font-bold text-white mb-1">System Live</h4>
        <p class="text-xs text-gray-300 leading-relaxed">
          Image processing is live now u can test it. Please keep video length under 30s because longer videos can take a while to analyze.
        </p>
      </div>
    </div>
  </div>

  <!-- LONG VIDEO MODAL (Hidden by default) -->
  <div id="longVideoModal" class="fixed inset-0 z-[60] flex items-center justify-center bg-black/80 backdrop-blur-sm px-4 hidden animate-fade-in">
    <div class="bg-card border border-accent/50 rounded-2xl p-8 max-w-md w-full shadow-[0_0_50px_rgba(255,122,24,0.2)] text-center">
      <div class="relative w-16 h-16 mx-auto mb-6">
        <div class="absolute inset-0 border-4 border-accent/20 rounded-full"></div>
        <div class="absolute inset-0 border-4 border-accent border-t-transparent rounded-full animate-spin"></div>
        <svg class="absolute inset-0 m-auto text-accent" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="23 7 16 12 23 17 23 7"/><rect x="1" y="5" width="15" height="14" rx="2" ry="2"/></svg>
      </div>
      <h3 class="text-xl font-bold text-white mb-2">Analyzing Long Video</h3>
      <p class="text-gray-300 mb-6">
        Your video exceeds 30 seconds. Deep learning models are processing frame-by-frame. This may take a few minutes.
      </p>
      <div class="text-sm text-gold bg-gold/10 p-3 rounded-lg border border-gold/20 animate-pulse-slow">
        Please do not close this window...
      </div>
    </div>
  </div>

  <div class="container max-w-6xl mx-auto px-4 md:px-6 pt-12 relative z-10">
    
    <!-- Header -->
    <header class="text-center mb-16 animate-fade-in">
      <div class="inline-flex items-center justify-center p-2 bg-white/5 rounded-full mb-6 border border-white/10 backdrop-blur-sm">
        <span class="px-3 py-1 bg-accent text-white text-xs font-bold rounded-full mr-2">NEW</span>
        <span class="text-xs text-gray-300 pr-2">AI Road Assessment v2.0</span>
      </div>
      <h1 class="text-4xl md:text-6xl font-black tracking-tight text-white mb-4 uppercase drop-shadow-lg">
        ROAD <span class="text-transparent bg-clip-text bg-gradient-to-r from-gold to-accent">QUALITY AI</span>
      </h1>
      <p class="text-gray-400 text-sm md:text-lg max-w-2xl mx-auto leading-relaxed">
        Advanced computer vision analysis for pothole detection, surface roughness assessment, and infrastructure inventory.
      </p>
    </header>

    <!-- Main Content Area -->
    <main>
      
      <!-- 1. Upload Section -->
      <div id="uploadSection" class="flex flex-wrap justify-center gap-6 mb-12 animate-fade-in" style="animation-delay: 0.1s;">
        
        <!-- Upload Image Button -->
        <button id="uploadImage" class="group relative flex flex-col items-center justify-center w-36 h-36 md:w-48 md:h-48 bg-card/60 backdrop-blur-md border border-white/10 rounded-2xl hover:border-accent hover:bg-accent/5 transition-all duration-300 active:scale-95 hover:shadow-[0_0_30px_rgba(255,122,24,0.15)]">
          <div class="mb-4 text-gray-400 group-hover:text-accent transition-colors">
            <!-- Upload Icon -->
            <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" x2="12" y1="3" y2="15"/></svg>
          </div>
          <span class="text-sm font-bold text-gray-300 group-hover:text-white tracking-wide">UPLOAD IMAGE</span>
        </button>

        <!-- Upload Video Button -->
        <button id="uploadVideo" class="group relative flex flex-col items-center justify-center w-36 h-36 md:w-48 md:h-48 bg-card/60 backdrop-blur-md border border-white/10 rounded-2xl hover:border-accent hover:bg-accent/5 transition-all duration-300 active:scale-95 hover:shadow-[0_0_30px_rgba(255,122,24,0.15)]">
          <div class="mb-4 text-gray-400 group-hover:text-accent transition-colors">
            <!-- Video Icon -->
            <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="18" height="18" x="3" y="3" rx="2" ry="2"/><circle cx="9" cy="9" r="2"/><path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"/></svg>
          </div>
          <span class="text-sm font-bold text-gray-300 group-hover:text-white tracking-wide">UPLOAD VIDEO</span>
        </button>

        <!-- Camera Button -->
        <button id="cameraButton" class="group relative flex flex-col items-center justify-center w-36 h-36 md:w-48 md:h-48 bg-card/60 backdrop-blur-md border border-white/10 rounded-2xl hover:border-accent hover:bg-accent/5 transition-all duration-300 active:scale-95 hover:shadow-[0_0_30px_rgba(255,122,24,0.15)]">
          <div class="mb-4 text-gray-400 group-hover:text-accent transition-colors">
            <!-- Camera Icon -->
            <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"/><circle cx="12" cy="13" r="3"/></svg>
          </div>
          <span class="text-sm font-bold text-gray-300 group-hover:text-white tracking-wide">OPEN CAMERA</span>
        </button>
      </div>

      <!-- Hidden Inputs -->
      <input id="imageInput" type="file" accept="image/*" class="hidden" />
      <input id="videoInput" type="file" accept="video/*" class="hidden" />

      <!-- 2. Preview & Progress Area -->
      <div id="previewContainer" class="max-w-3xl mx-auto bg-card/80 backdrop-blur-xl border border-white/10 rounded-2xl p-6 mb-12 shadow-2xl hidden animate-fade-in">
        
        <div class="flex items-center justify-between mb-4 border-b border-white/5 pb-4">
          <div class="flex items-center gap-3">
             <svg class="text-green-500" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>
             <h3 id="fileName" class="font-semibold text-white truncate max-w-[200px]">Selected File</h3>
          </div>
          <button id="resetBtn" class="text-xs text-red-400 hover:text-red-300 hover:bg-red-400/10 px-3 py-1 rounded-lg transition-all uppercase tracking-wider font-semibold">Reset</button>
        </div>

        <!-- Image/Video mounts here -->
        <div id="previewArea" class="relative rounded-xl overflow-hidden bg-black/40 border border-white/10 mb-6 flex justify-center min-h-[200px] max-h-[500px]">
          <div class="flex items-center justify-center text-gray-500 text-sm italic p-10">Preview Loading...</div>
        </div>

        <!-- Actions -->
        <div class="flex flex-col gap-4">
          
          <!-- Progress Bar -->
          <div id="progressBar" class="hidden w-full">
            <div class="flex justify-between text-xs uppercase tracking-widest font-bold text-accent mb-2">
              <span>Processing...</span>
              <span class="animate-pulse">AI Analysis</span>
            </div>
            <div class="h-2 w-full bg-gray-800/50 rounded-full overflow-hidden border border-white/5">
              <div id="progressInner" class="h-full bg-gradient-to-r from-accent to-gold w-0 transition-all duration-300 ease-out"></div>
            </div>
          </div>

          <!-- Analyse Button -->
          <div>
            <button id="analyseBtn" class="w-full py-4 bg-gradient-to-r from-accent to-orange-600 text-white font-bold rounded-xl shadow-[0_10px_30px_rgba(255,122,24,0.2)] transition-all transform hover:-translate-y-1 active:scale-[0.98] flex items-center justify-center gap-2 text-lg">
              <svg class="animate-pulse-slow" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 12h-4l-3 9L9 3l-3 9H2"/></svg>
              RUN ANALYSIS
            </button>
            
            <!-- Static Warning -->
            <div class="text-center mt-4 animate-fade-in">
               <p class="text-xs text-gold/80 font-medium bg-gold/5 inline-block px-4 py-2 rounded-lg border border-gold/10">
                 ⚠️ Analysis can take up to 5-10 mins. Please wait.
               </p>
            </div>
          </div>
        </div>
      </div>

      <!-- 3. Results Dashboard -->
      <div id="resultBox" class="hidden animate-fade-in">
        
        <div class="flex justify-between items-center mb-8 border-l-4 border-accent pl-4">
          <h2 class="text-2xl md:text-3xl font-bold text-white">Analysis Report</h2>
        </div>

        <!-- RDS Score & Grid -->
        <div class="bg-card/80 backdrop-blur-md border border-white/10 rounded-3xl p-8 text-center relative overflow-hidden mb-8 shadow-2xl">
          <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-accent to-gold opacity-50"></div>
          
          <p class="text-gray-400 font-medium uppercase tracking-[0.2em] mb-4 text-sm">Road Quality Score (RDS)</p>
          
          <!-- Big Score Display -->
          <div id="rdsText" class="mb-8">
            <span class="text-6xl md:text-8xl font-black text-white tracking-tighter drop-shadow-[0_0_25px_rgba(255,122,24,0.4)]">--</span>
          </div>
          
          <!-- Levels Grid -->
          <div id="levels" class="grid grid-cols-2 md:grid-cols-5 gap-3 max-w-5xl mx-auto">
            <!-- Rendered by JS -->
          </div>
        </div>

        <!-- Metrics Grid -->
        <div id="valuesText" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-12">
          <!-- Rendered by JS -->
        </div>

        <!-- Snapshots Section -->
        <div id="snapshotSection" class="bg-card/40 border border-white/5 rounded-2xl p-6 hidden">
          <h3 class="text-xl font-bold text-white mb-6 flex items-center gap-3">
            <svg class="text-accent" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 12h10"/><path d="M9 4v16"/><path d="m3 9 3 3-3 3"/><path d="M14 8V6c0-1.1.9-2 2-2h4c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2h-4c-1.1 0-2-.9-2-2v-2"/><path d="M20 12h2"/><path d="m17 9 3 3-3 3"/></svg>
            Annotated Sample Frames
          </h3>
          <div id="snapshot-container" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4">
            <!-- Images go here -->
          </div>
        </div>

      </div>

    </main>
  </div>

  <script type="module" src="/src/main.js"></script>
</body>
</html>
